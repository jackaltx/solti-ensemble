; app.ini for Gitea
; Generated by Ansible

APP_NAME = Gitea
RUN_USER = {{ gitea_user }}
RUN_MODE = prod
WORK_PATH = {{ gitea_work_dir }}

[repository]
ROOT = {{ gitea_data_path }}/repositories

[repository.local]
LOCAL_COPY_PATH = {{ gitea_data_path }}/tmp/local-repo

[repository.upload]
TEMP_PATH = {{ gitea_data_path }}/tmp/uploads

[server]
DOMAIN           = {{ gitea_http_domain }}
HTTP_PORT        = {{ gitea_http_port }}
ROOT_URL         = {{ gitea_root_url }}
HTTP_ADDR        = {{ gitea_http_addr }}
PROTOCOL         = {{ gitea_protocol }}
DISABLE_SSH      = false
SSH_PORT         = 22
LFS_START_SERVER = true
OFFLINE_MODE     = false
DISABLE_QUERY_AUTH_TOKEN = true

{% if gitea_protocol == 'https' and gitea_cert != '' and gitea_key != '' %}
CERT_FILE = {{ gitea_cert }}
KEY_FILE = {{ gitea_key }}
{% endif %}

[database]
DB_TYPE = {{ gitea_db_type }}
PATH = {{ gitea_data_path }}/gitea.db
{% if gitea_db_type != 'sqlite3' %}
HOST = {{ gitea_db_host }}
NAME = {{ gitea_db_name }}
USER = {{ gitea_db_user }}
PASSWD = {{ gitea_db_password }}
{% endif %}

[indexer]
ISSUE_INDEXER_PATH = {{ gitea_data_path }}/indexers/issues.bleve

[session]
PROVIDER_CONFIG = {{ gitea_data_path }}/sessions
PROVIDER        = file

[picture]
AVATAR_UPLOAD_PATH      = {{ gitea_data_path }}/avatars
REPOSITORY_AVATAR_PATH  = {{ gitea_data_path }}/repo-avatars
DISABLE_GRAVATAR        = false
ENABLE_FEDERATED_AVATAR = true

[attachment]
PATH = {{ gitea_data_path }}/attachments

[lfs]
PATH = {{ gitea_data_path }}/lfs

[log]
ROOT_PATH = {{ gitea_log_path }}
MODE      = file
LEVEL     = info

[security]
INSTALL_LOCK = true
SECRET_KEY   = {{ lookup('ansible.builtin.password', '/dev/null', length=32, chars=['ascii_letters', 'digits']) }}

[service]
DISABLE_REGISTRATION              = {{ gitea_disable_registration | string | lower }}
REQUIRE_SIGNIN_VIEW               = {{ gitea_require_signin | string | lower }}
REGISTER_EMAIL_CONFIRM            = false
ENABLE_NOTIFY_MAIL                = false
ALLOW_ONLY_EXTERNAL_REGISTRATION  = false
ENABLE_CAPTCHA                    = false
DEFAULT_KEEP_EMAIL_PRIVATE        = false
DEFAULT_ALLOW_CREATE_ORGANIZATION = true
DEFAULT_ENABLE_TIMETRACKING       = true
NO_REPLY_ADDRESS                  = noreply.{{ gitea_http_domain }}

[mailer]
ENABLED = false

[openid]
ENABLE_OPENID_SIGNIN = true
ENABLE_OPENID_SIGNUP = false

[ui]
EXPLORE_PAGING_NUM = 20
ISSUE_PAGING_NUM   = 10
FEED_MAX_COMMIT_NUM = 5

